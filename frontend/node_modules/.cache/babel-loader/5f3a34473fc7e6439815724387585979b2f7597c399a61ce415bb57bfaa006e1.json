{"ast":null,"code":"import axios from'axios';var API_URL=process.env.REACT_APP_API_URL||'http://localhost:5000/api';var api=axios.create({baseURL:API_URL,headers:{'Content-Type':'application/json'}});// Attach token to every request\napi.interceptors.request.use(function(config){var token=localStorage.getItem('token');if(token){config.headers.Authorization=\"Bearer \".concat(token);}return config;});// Handle 401 responses\napi.interceptors.response.use(function(response){return response;},function(error){if(error.response&&error.response.status===401){localStorage.removeItem('token');localStorage.removeItem('user');window.location.href='/login';}return Promise.reject(error);});// Auth\nexport var authAPI={login:function login(data){return api.post('/auth/login',data);},getMe:function getMe(){return api.get('/auth/me');},changePassword:function changePassword(data){return api.put('/auth/password',data);}};// Utilisateurs\nexport var utilisateurAPI={getAll:function getAll(params){return api.get('/utilisateurs',{params:params});},getById:function getById(id){return api.get(\"/utilisateurs/\".concat(id));},create:function create(data){return api.post('/utilisateurs',data);},update:function update(id,data){return api.put(\"/utilisateurs/\".concat(id),data);},delete:function _delete(id){return api.delete(\"/utilisateurs/\".concat(id));}};// Patients\nexport var patientAPI={getAll:function getAll(){return api.get('/patients');},getById:function getById(id){return api.get(\"/patients/\".concat(id));},create:function create(data){return api.post('/patients',data);},update:function update(id,data){return api.put(\"/patients/\".concat(id),data);},delete:function _delete(id){return api.delete(\"/patients/\".concat(id));}};// Dossiers Médicaux\nexport var dossierAPI={getAll:function getAll(params){return api.get('/dossiers',{params:params});},getById:function getById(id){return api.get(\"/dossiers/\".concat(id));},create:function create(data){return api.post('/dossiers',data);},update:function update(id,data){return api.put(\"/dossiers/\".concat(id),data);},delete:function _delete(id){return api.delete(\"/dossiers/\".concat(id));},exportCSV:function exportCSV(id){return api.get(\"/dossiers/\".concat(id,\"/csv\"),{responseType:'blob'});}};// Signes Vitaux\nexport var signesVitauxAPI={getAll:function getAll(params){return api.get('/signes-vitaux',{params:params});},getById:function getById(id){return api.get(\"/signes-vitaux/\".concat(id));},create:function create(data){return api.post('/signes-vitaux',data);},delete:function _delete(id){return api.delete(\"/signes-vitaux/\".concat(id));}};// Analyses\nexport var analyseAPI={getAll:function getAll(params){return api.get('/analyses',{params:params});},getById:function getById(id){return api.get(\"/analyses/\".concat(id));},create:function create(data){return api.post('/analyses',data);},addResultat:function addResultat(id,data){return api.post(\"/analyses/\".concat(id,\"/resultat\"),data);},delete:function _delete(id){return api.delete(\"/analyses/\".concat(id));}};// Rapports PDF\nexport var rapportAPI={getAll:function getAll(params){return api.get('/rapports',{params:params});},generate:function generate(data){return api.post('/rapports/generate',data);},download:function download(id){return api.get(\"/rapports/\".concat(id,\"/download\"),{responseType:'blob'});},delete:function _delete(id){return api.delete(\"/rapports/\".concat(id));}};// Statistiques\nexport var statistiqueAPI={getDashboard:function getDashboard(){return api.get('/statistiques');}};// Documents sécurisés\nexport var documentAPI={getAll:function getAll(params){return api.get('/documents',{params:params});},getById:function getById(id){return api.get(\"/documents/\".concat(id));},upload:function upload(formData){return api.post('/documents/upload',formData,{headers:{'Content-Type':'multipart/form-data'}});},download:function download(id){return api.get(\"/documents/\".concat(id,\"/download\"),{responseType:'blob'});},delete:function _delete(id){return api.delete(\"/documents/\".concat(id));}};// Journal d'activités (logs)\nexport var logAPI={getAll:function getAll(params){return api.get('/logs',{params:params});},getStats:function getStats(){return api.get('/logs/stats');}};export default api;","map":{"version":3,"names":["axios","API_URL","process","env","REACT_APP_API_URL","api","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","concat","response","error","status","removeItem","window","location","href","Promise","reject","authAPI","login","data","post","getMe","get","changePassword","put","utilisateurAPI","getAll","params","getById","id","update","delete","_delete","patientAPI","dossierAPI","exportCSV","responseType","signesVitauxAPI","analyseAPI","addResultat","rapportAPI","generate","download","statistiqueAPI","getDashboard","documentAPI","upload","formData","logAPI","getStats"],"sources":["C:/Users/AZIZ/Desktop/pfa esprim/barhoum/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n\r\nconst api = axios.create({\r\n  baseURL: API_URL,\r\n  headers: { 'Content-Type': 'application/json' },\r\n});\r\n\r\n// Attach token to every request\r\napi.interceptors.request.use((config) => {\r\n  const token = localStorage.getItem('token');\r\n  if (token) {\r\n    config.headers.Authorization = `Bearer ${token}`;\r\n  }\r\n  return config;\r\n});\r\n\r\n// Handle 401 responses\r\napi.interceptors.response.use(\r\n  (response) => response,\r\n  (error) => {\r\n    if (error.response && error.response.status === 401) {\r\n      localStorage.removeItem('token');\r\n      localStorage.removeItem('user');\r\n      window.location.href = '/login';\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Auth\r\nexport const authAPI = {\r\n  login: (data) => api.post('/auth/login', data),\r\n  getMe: () => api.get('/auth/me'),\r\n  changePassword: (data) => api.put('/auth/password', data),\r\n};\r\n\r\n// Utilisateurs\r\nexport const utilisateurAPI = {\r\n  getAll: (params) => api.get('/utilisateurs', { params }),\r\n  getById: (id) => api.get(`/utilisateurs/${id}`),\r\n  create: (data) => api.post('/utilisateurs', data),\r\n  update: (id, data) => api.put(`/utilisateurs/${id}`, data),\r\n  delete: (id) => api.delete(`/utilisateurs/${id}`),\r\n};\r\n\r\n// Patients\r\nexport const patientAPI = {\r\n  getAll: () => api.get('/patients'),\r\n  getById: (id) => api.get(`/patients/${id}`),\r\n  create: (data) => api.post('/patients', data),\r\n  update: (id, data) => api.put(`/patients/${id}`, data),\r\n  delete: (id) => api.delete(`/patients/${id}`),\r\n};\r\n\r\n// Dossiers Médicaux\r\nexport const dossierAPI = {\r\n  getAll: (params) => api.get('/dossiers', { params }),\r\n  getById: (id) => api.get(`/dossiers/${id}`),\r\n  create: (data) => api.post('/dossiers', data),\r\n  update: (id, data) => api.put(`/dossiers/${id}`, data),\r\n  delete: (id) => api.delete(`/dossiers/${id}`),\r\n  exportCSV: (id) => api.get(`/dossiers/${id}/csv`, { responseType: 'blob' }),\r\n};\r\n\r\n// Signes Vitaux\r\nexport const signesVitauxAPI = {\r\n  getAll: (params) => api.get('/signes-vitaux', { params }),\r\n  getById: (id) => api.get(`/signes-vitaux/${id}`),\r\n  create: (data) => api.post('/signes-vitaux', data),\r\n  delete: (id) => api.delete(`/signes-vitaux/${id}`),\r\n};\r\n\r\n// Analyses\r\nexport const analyseAPI = {\r\n  getAll: (params) => api.get('/analyses', { params }),\r\n  getById: (id) => api.get(`/analyses/${id}`),\r\n  create: (data) => api.post('/analyses', data),\r\n  addResultat: (id, data) => api.post(`/analyses/${id}/resultat`, data),\r\n  delete: (id) => api.delete(`/analyses/${id}`),\r\n};\r\n\r\n// Rapports PDF\r\nexport const rapportAPI = {\r\n  getAll: (params) => api.get('/rapports', { params }),\r\n  generate: (data) => api.post('/rapports/generate', data),\r\n  download: (id) => api.get(`/rapports/${id}/download`, { responseType: 'blob' }),\r\n  delete: (id) => api.delete(`/rapports/${id}`),\r\n};\r\n\r\n// Statistiques\r\nexport const statistiqueAPI = {\r\n  getDashboard: () => api.get('/statistiques'),\r\n};\r\n\r\n// Documents sécurisés\r\nexport const documentAPI = {\r\n  getAll: (params) => api.get('/documents', { params }),\r\n  getById: (id) => api.get(`/documents/${id}`),\r\n  upload: (formData) => api.post('/documents/upload', formData, {\r\n    headers: { 'Content-Type': 'multipart/form-data' },\r\n  }),\r\n  download: (id) => api.get(`/documents/${id}/download`, { responseType: 'blob' }),\r\n  delete: (id) => api.delete(`/documents/${id}`),\r\n};\r\n\r\n// Journal d'activités (logs)\r\nexport const logAPI = {\r\n  getAll: (params) => api.get('/logs', { params }),\r\n  getStats: () => api.get('/logs/stats'),\r\n};\r\n\r\nexport default api;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAEzB,GAAM,CAAAC,OAAO,CAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,EAAI,2BAA2B,CAE5E,GAAM,CAAAC,GAAG,CAAGL,KAAK,CAACM,MAAM,CAAC,CACvBC,OAAO,CAAEN,OAAO,CAChBO,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAChD,CAAC,CAAC,CAEF;AACAH,GAAG,CAACI,YAAY,CAACC,OAAO,CAACC,GAAG,CAAC,SAACC,MAAM,CAAK,CACvC,GAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAIF,KAAK,CAAE,CACTD,MAAM,CAACJ,OAAO,CAACQ,aAAa,WAAAC,MAAA,CAAaJ,KAAK,CAAE,CAClD,CACA,MAAO,CAAAD,MAAM,CACf,CAAC,CAAC,CAEF;AACAP,GAAG,CAACI,YAAY,CAACS,QAAQ,CAACP,GAAG,CAC3B,SAACO,QAAQ,QAAK,CAAAA,QAAQ,GACtB,SAACC,KAAK,CAAK,CACT,GAAIA,KAAK,CAACD,QAAQ,EAAIC,KAAK,CAACD,QAAQ,CAACE,MAAM,GAAK,GAAG,CAAE,CACnDN,YAAY,CAACO,UAAU,CAAC,OAAO,CAAC,CAChCP,YAAY,CAACO,UAAU,CAAC,MAAM,CAAC,CAC/BC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAG,QAAQ,CACjC,CACA,MAAO,CAAAC,OAAO,CAACC,MAAM,CAACP,KAAK,CAAC,CAC9B,CACF,CAAC,CAED;AACA,MAAO,IAAM,CAAAQ,OAAO,CAAG,CACrBC,KAAK,CAAE,SAAAA,MAACC,IAAI,QAAK,CAAAxB,GAAG,CAACyB,IAAI,CAAC,aAAa,CAAED,IAAI,CAAC,GAC9CE,KAAK,CAAE,SAAAA,MAAA,QAAM,CAAA1B,GAAG,CAAC2B,GAAG,CAAC,UAAU,CAAC,GAChCC,cAAc,CAAE,SAAAA,eAACJ,IAAI,QAAK,CAAAxB,GAAG,CAAC6B,GAAG,CAAC,gBAAgB,CAAEL,IAAI,CAAC,EAC3D,CAAC,CAED;AACA,MAAO,IAAM,CAAAM,cAAc,CAAG,CAC5BC,MAAM,CAAE,SAAAA,OAACC,MAAM,QAAK,CAAAhC,GAAG,CAAC2B,GAAG,CAAC,eAAe,CAAE,CAAEK,MAAM,CAANA,MAAO,CAAC,CAAC,GACxDC,OAAO,CAAE,SAAAA,QAACC,EAAE,QAAK,CAAAlC,GAAG,CAAC2B,GAAG,kBAAAf,MAAA,CAAkBsB,EAAE,CAAE,CAAC,GAC/CjC,MAAM,CAAE,SAAAA,OAACuB,IAAI,QAAK,CAAAxB,GAAG,CAACyB,IAAI,CAAC,eAAe,CAAED,IAAI,CAAC,GACjDW,MAAM,CAAE,SAAAA,OAACD,EAAE,CAAEV,IAAI,QAAK,CAAAxB,GAAG,CAAC6B,GAAG,kBAAAjB,MAAA,CAAkBsB,EAAE,EAAIV,IAAI,CAAC,GAC1DY,MAAM,CAAE,SAAAC,QAACH,EAAE,QAAK,CAAAlC,GAAG,CAACoC,MAAM,kBAAAxB,MAAA,CAAkBsB,EAAE,CAAE,CAAC,EACnD,CAAC,CAED;AACA,MAAO,IAAM,CAAAI,UAAU,CAAG,CACxBP,MAAM,CAAE,SAAAA,OAAA,QAAM,CAAA/B,GAAG,CAAC2B,GAAG,CAAC,WAAW,CAAC,GAClCM,OAAO,CAAE,SAAAA,QAACC,EAAE,QAAK,CAAAlC,GAAG,CAAC2B,GAAG,cAAAf,MAAA,CAAcsB,EAAE,CAAE,CAAC,GAC3CjC,MAAM,CAAE,SAAAA,OAACuB,IAAI,QAAK,CAAAxB,GAAG,CAACyB,IAAI,CAAC,WAAW,CAAED,IAAI,CAAC,GAC7CW,MAAM,CAAE,SAAAA,OAACD,EAAE,CAAEV,IAAI,QAAK,CAAAxB,GAAG,CAAC6B,GAAG,cAAAjB,MAAA,CAAcsB,EAAE,EAAIV,IAAI,CAAC,GACtDY,MAAM,CAAE,SAAAC,QAACH,EAAE,QAAK,CAAAlC,GAAG,CAACoC,MAAM,cAAAxB,MAAA,CAAcsB,EAAE,CAAE,CAAC,EAC/C,CAAC,CAED;AACA,MAAO,IAAM,CAAAK,UAAU,CAAG,CACxBR,MAAM,CAAE,SAAAA,OAACC,MAAM,QAAK,CAAAhC,GAAG,CAAC2B,GAAG,CAAC,WAAW,CAAE,CAAEK,MAAM,CAANA,MAAO,CAAC,CAAC,GACpDC,OAAO,CAAE,SAAAA,QAACC,EAAE,QAAK,CAAAlC,GAAG,CAAC2B,GAAG,cAAAf,MAAA,CAAcsB,EAAE,CAAE,CAAC,GAC3CjC,MAAM,CAAE,SAAAA,OAACuB,IAAI,QAAK,CAAAxB,GAAG,CAACyB,IAAI,CAAC,WAAW,CAAED,IAAI,CAAC,GAC7CW,MAAM,CAAE,SAAAA,OAACD,EAAE,CAAEV,IAAI,QAAK,CAAAxB,GAAG,CAAC6B,GAAG,cAAAjB,MAAA,CAAcsB,EAAE,EAAIV,IAAI,CAAC,GACtDY,MAAM,CAAE,SAAAC,QAACH,EAAE,QAAK,CAAAlC,GAAG,CAACoC,MAAM,cAAAxB,MAAA,CAAcsB,EAAE,CAAE,CAAC,GAC7CM,SAAS,CAAE,SAAAA,UAACN,EAAE,QAAK,CAAAlC,GAAG,CAAC2B,GAAG,cAAAf,MAAA,CAAcsB,EAAE,SAAQ,CAAEO,YAAY,CAAE,MAAO,CAAC,CAAC,EAC7E,CAAC,CAED;AACA,MAAO,IAAM,CAAAC,eAAe,CAAG,CAC7BX,MAAM,CAAE,SAAAA,OAACC,MAAM,QAAK,CAAAhC,GAAG,CAAC2B,GAAG,CAAC,gBAAgB,CAAE,CAAEK,MAAM,CAANA,MAAO,CAAC,CAAC,GACzDC,OAAO,CAAE,SAAAA,QAACC,EAAE,QAAK,CAAAlC,GAAG,CAAC2B,GAAG,mBAAAf,MAAA,CAAmBsB,EAAE,CAAE,CAAC,GAChDjC,MAAM,CAAE,SAAAA,OAACuB,IAAI,QAAK,CAAAxB,GAAG,CAACyB,IAAI,CAAC,gBAAgB,CAAED,IAAI,CAAC,GAClDY,MAAM,CAAE,SAAAC,QAACH,EAAE,QAAK,CAAAlC,GAAG,CAACoC,MAAM,mBAAAxB,MAAA,CAAmBsB,EAAE,CAAE,CAAC,EACpD,CAAC,CAED;AACA,MAAO,IAAM,CAAAS,UAAU,CAAG,CACxBZ,MAAM,CAAE,SAAAA,OAACC,MAAM,QAAK,CAAAhC,GAAG,CAAC2B,GAAG,CAAC,WAAW,CAAE,CAAEK,MAAM,CAANA,MAAO,CAAC,CAAC,GACpDC,OAAO,CAAE,SAAAA,QAACC,EAAE,QAAK,CAAAlC,GAAG,CAAC2B,GAAG,cAAAf,MAAA,CAAcsB,EAAE,CAAE,CAAC,GAC3CjC,MAAM,CAAE,SAAAA,OAACuB,IAAI,QAAK,CAAAxB,GAAG,CAACyB,IAAI,CAAC,WAAW,CAAED,IAAI,CAAC,GAC7CoB,WAAW,CAAE,SAAAA,YAACV,EAAE,CAAEV,IAAI,QAAK,CAAAxB,GAAG,CAACyB,IAAI,cAAAb,MAAA,CAAcsB,EAAE,cAAaV,IAAI,CAAC,GACrEY,MAAM,CAAE,SAAAC,QAACH,EAAE,QAAK,CAAAlC,GAAG,CAACoC,MAAM,cAAAxB,MAAA,CAAcsB,EAAE,CAAE,CAAC,EAC/C,CAAC,CAED;AACA,MAAO,IAAM,CAAAW,UAAU,CAAG,CACxBd,MAAM,CAAE,SAAAA,OAACC,MAAM,QAAK,CAAAhC,GAAG,CAAC2B,GAAG,CAAC,WAAW,CAAE,CAAEK,MAAM,CAANA,MAAO,CAAC,CAAC,GACpDc,QAAQ,CAAE,SAAAA,SAACtB,IAAI,QAAK,CAAAxB,GAAG,CAACyB,IAAI,CAAC,oBAAoB,CAAED,IAAI,CAAC,GACxDuB,QAAQ,CAAE,SAAAA,SAACb,EAAE,QAAK,CAAAlC,GAAG,CAAC2B,GAAG,cAAAf,MAAA,CAAcsB,EAAE,cAAa,CAAEO,YAAY,CAAE,MAAO,CAAC,CAAC,GAC/EL,MAAM,CAAE,SAAAC,QAACH,EAAE,QAAK,CAAAlC,GAAG,CAACoC,MAAM,cAAAxB,MAAA,CAAcsB,EAAE,CAAE,CAAC,EAC/C,CAAC,CAED;AACA,MAAO,IAAM,CAAAc,cAAc,CAAG,CAC5BC,YAAY,CAAE,SAAAA,aAAA,QAAM,CAAAjD,GAAG,CAAC2B,GAAG,CAAC,eAAe,CAAC,EAC9C,CAAC,CAED;AACA,MAAO,IAAM,CAAAuB,WAAW,CAAG,CACzBnB,MAAM,CAAE,SAAAA,OAACC,MAAM,QAAK,CAAAhC,GAAG,CAAC2B,GAAG,CAAC,YAAY,CAAE,CAAEK,MAAM,CAANA,MAAO,CAAC,CAAC,GACrDC,OAAO,CAAE,SAAAA,QAACC,EAAE,QAAK,CAAAlC,GAAG,CAAC2B,GAAG,eAAAf,MAAA,CAAesB,EAAE,CAAE,CAAC,GAC5CiB,MAAM,CAAE,SAAAA,OAACC,QAAQ,QAAK,CAAApD,GAAG,CAACyB,IAAI,CAAC,mBAAmB,CAAE2B,QAAQ,CAAE,CAC5DjD,OAAO,CAAE,CAAE,cAAc,CAAE,qBAAsB,CACnD,CAAC,CAAC,GACF4C,QAAQ,CAAE,SAAAA,SAACb,EAAE,QAAK,CAAAlC,GAAG,CAAC2B,GAAG,eAAAf,MAAA,CAAesB,EAAE,cAAa,CAAEO,YAAY,CAAE,MAAO,CAAC,CAAC,GAChFL,MAAM,CAAE,SAAAC,QAACH,EAAE,QAAK,CAAAlC,GAAG,CAACoC,MAAM,eAAAxB,MAAA,CAAesB,EAAE,CAAE,CAAC,EAChD,CAAC,CAED;AACA,MAAO,IAAM,CAAAmB,MAAM,CAAG,CACpBtB,MAAM,CAAE,SAAAA,OAACC,MAAM,QAAK,CAAAhC,GAAG,CAAC2B,GAAG,CAAC,OAAO,CAAE,CAAEK,MAAM,CAANA,MAAO,CAAC,CAAC,GAChDsB,QAAQ,CAAE,SAAAA,SAAA,QAAM,CAAAtD,GAAG,CAAC2B,GAAG,CAAC,aAAa,CAAC,EACxC,CAAC,CAED,cAAe,CAAA3B,GAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}